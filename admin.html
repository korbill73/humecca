<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HUMECCA 관리자</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css?v=2.0">
    <link rel="stylesheet" href="admin_style.css?v=2.2"> <!-- Added Admin Styles -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabase_config.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Fallback / Critical CSS for Tabs */
        .tabs {
            display: flex;
            gap: 0;
            border-bottom: 2px solid #e5e7eb;
            margin-bottom: 25px;
            margin-top: 10px;
        }

        .tab {
            padding: 12px 24px;
            cursor: pointer;
            font-weight: 500;
            color: #6b7280;
            border-bottom: 2px solid transparent;
            margin-bottom: -2px;
            font-size: 15px;
            transition: all 0.2s;
        }

        .tab:hover {
            color: #1f2937;
            background-color: #f9fafb;
        }

        .tab.active {
            color: #E94D36;
            border-bottom: 2px solid #E94D36;
            background-color: transparent;
            font-weight: 700;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #f5f7fa;
            color: #333;
        }

        .admin-header {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            padding: 20px 40px;
        }

        .admin-header h1 {
            font-size: 20px;
            font-weight: 600;
            color: #1a1a2e;
        }

        .admin-tabs {
            display: flex;
            gap: 0;
            margin-top: 20px;
            border-bottom: 1px solid #e5e7eb;
        }

        .admin-tab {
            padding: 12px 24px;
            background: none;
            border: none;
            color: #64748b;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            position: relative;
            transition: all 0.3s;
        }

        .admin-tab:hover {
            color: #1a1a2e;
            background: #f8f9fa;
        }

        .admin-tab.active {
            color: #EF4444;
            font-weight: 600;
        }

        .admin-tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 2px;
            background: #EF4444;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .page-title {
            font-size: 24px;
            font-weight: 700;
            color: #1a1a2e;
            margin-bottom: 8px;
        }

        .page-subtitle {
            font-size: 14px;
            color: #64748b;
            margin-bottom: 30px;
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
            color: #1a1a2e;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
            font-size: 14px;
        }

        .form-input {
            width: 100%;
            padding: 10px 14px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: #EF4444;
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }

        .btn-primary {
            background: #EF4444;
            color: white;
        }

        .btn-primary:hover {
            background: #DC2626;
        }

        .btn-secondary {
            background: #f1f5f9;
            color: #64748b;
        }

        .btn-secondary:hover {
            background: #e2e8f0;
        }

        .btn-dark {
            background: #1e293b;
            color: white;
        }

        .btn-dark:hover {
            background: #0f172a;
        }

        /* Customer Grid */
        .customer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            margin-top: 24px;
        }

        .customer-card {
            background: #f8f9fa;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 24px;
            text-align: center;
            position: relative;
            transition: all 0.3s;
        }

        .customer-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            border-color: #EF4444;
        }

        .delete-btn {
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 4px;
            width: 24px;
            height: 24px;
            cursor: pointer;
            font-size: 12px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .alert {
            padding: 14px 18px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .alert-success {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #6ee7b7;
        }

        .alert-info {
            background: #eff6ff;
            color: #1e3a8a;
            border: 1px solid #bfdbfe;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: #64748b;
            text-decoration: none;
            margin-bottom: 20px;
            font-size: 14px;
        }

        .back-link:hover {
            color: #EF4444;
        }

        /* Table Styles for Product List */
        .admin-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }

        .admin-table th {
            text-align: left;
            padding: 12px 16px;
            background: #f8f9fa;
            border-bottom: 2px solid #e5e7eb;
            color: #64748b;
            font-weight: 600;
        }

        .admin-table td {
            padding: 16px;
            border-bottom: 1px solid #f1f5f9;
            color: #333;
            vertical-align: middle;
        }

        .admin-table tr:hover {
            background-color: #f8fafc;
        }

        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
        }

        .badge-blue {
            background: #dbeafe;
            color: #2563eb;
        }

        .badge-green {
            background: #dcfce7;
            color: #166534;
        }

        .badge-gray {
            background: #f1f5f9;
            color: #64748b;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        .grid-4 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            gap: 16px;
        }

        /* Modal Overlay for Export */
        #export-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-box {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
            padding: 30px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>

<body>
    <div class="admin-header">
        <h1>HUMECCA 관리자</h1>
        <div class="admin-tabs">
            <button class="admin-tab" onclick="showTab('notice')">공지사항</button>
            <button class="admin-tab" onclick="showTab('faq')">FAQ</button>
            <button class="admin-tab" onclick="showTab('inquiry')">문의 관리</button>
            <button class="admin-tab" onclick="showTab('ticket')">티켓 관리</button>
            <button class="admin-tab active" onclick="showTab('product')">상품 관리</button>
            <button class="admin-tab" onclick="showTab('history')">회사 연혁</button>
            <button class="admin-tab" onclick="showTab('customer')">고객사 로고</button>
            <button class="admin-tab" onclick="showTab('webhook')">웹훅로닉스</button>
            <button class="admin-tab" onclick="showTab('terms')">약관 관리</button>
            <button class="admin-tab" onclick="showTab('contact')">연락 관리</button>
            <button class="admin-tab" onclick="showTab('analytics')">웹로그 분석</button>
        </div>
    </div>

    <div class="container">

        <!-- ======================= 상품 관리 탭 ======================= -->
        <div id="tab-product" class="tab-content active">
            <!-- Header with Data Sync Button -->
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <div>
                    <h2 class="page-title">상품 및 서비스 관리</h2>
                    <p class="page-subtitle">호스팅, VPN, 보안, 부가서비스 등 모든 상품을 통합 관리합니다.</p>
                </div>
                <button class="btn btn-primary" onclick="migrateToSupabase()"
                    style="background-color: #f59e0b; border-color: #f59e0b;">
                    <i class="fas fa-database"></i> 데이터 가져오기 (초기화)
                </button>
            </div>

            <a href="index.html" class="back-link" style="display:block; margin-bottom: 20px;"><i
                    class="fas fa-arrow-left"></i> 홈페이지로 돌아가기</a>

            <div id="product-alert-container"></div>

            <!-- 탭 메뉴 (Centering handled by CSS) -->
            <div class="tabs">
                <div class="tab active" onclick="switchProductTab('hosting')" id="tab-hosting">서버 호스팅</div>
                <div class="tab" onclick="switchProductTab('vpn')" id="tab-vpn">VPN 전용선</div>
                <div class="tab" onclick="switchProductTab('colocation')" id="tab-colocation">코로케이션</div>
                <div class="tab" onclick="switchProductTab('security')" id="tab-security">보안 서비스</div>
                <div class="tab" onclick="switchProductTab('service')" id="tab-service">부가서비스</div>
            </div>

            <!-- 1. 서버 호스팅 관리 섹션 -->
            <div id="sub-hosting" class="sub-content">
                <!-- 목록 Card (상단 배치) -->
                <div class="card" style="margin-bottom:30px;">
                    <div class="card-header">
                        <h3 class="card-title">서버 호스팅 목록</h3>
                    </div>
                    <div style="overflow-x:auto;">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th width="50">#</th>
                                    <th>상품명</th>
                                    <th>가격</th>
                                    <th>사양 (CPU/RAM)</th>
                                    <th>상태</th>
                                    <th>관리</th>
                                </tr>
                            </thead>
                            <tbody id="hosting-list-body"></tbody>
                        </table>
                    </div>
                </div>

                <!-- 등록/수정 폼 (하단 배치) -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title" id="h-form-title">호스팅 상품 등록/수정</h3>
                        <button type="button" class="btn btn-secondary btn-sm" onclick="resetForm('hosting')"
                            style="margin-left: auto;">
                            <i class="fas fa-undo"></i> 초기화
                        </button>
                    </div>
                    <form id="hosting-form">
                        <input type="hidden" id="h-id-hidden"> <!-- For Edit Mode -->

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <div class="form-group">
                                <label>상품명</label>
                                <input type="text" id="h-name" class="form-control" placeholder="예: 비즈니스" required>
                            </div>
                            <div class="form-group">
                                <label>고유 ID (영문/숫자)</label>
                                <input type="text" id="h-id" class="form-control" placeholder="예: biz_01" required>
                            </div>
                            <div class="form-group">
                                <label>가격 (숫자, 콤마 포함)</label>
                                <input type="text" id="h-price" class="form-control" placeholder="예: 199,000" required>
                            </div>
                            <div class="form-group">
                                <label>기간/단위</label>
                                <select id="h-period" class="form-control">
                                    <option value="월">월 (Month)</option>
                                    <option value="년">년 (Year)</option>
                                    <option value="1회">1회 (One-time)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>CPU</label>
                                <input type="text" id="h-cpu" class="form-control" placeholder="예: Xeon Silver 4210">
                            </div>
                            <div class="form-group">
                                <label>RAM</label>
                                <input type="text" id="h-ram" class="form-control" placeholder="예: 64GB DDR4">
                            </div>
                            <div class="form-group">
                                <label>Storage</label>
                                <input type="text" id="h-storage" class="form-control" placeholder="예: 1TB NVMe">
                            </div>
                            <div class="form-group">
                                <label>Traffic</label>
                                <input type="text" id="h-traffic" class="form-control" placeholder="예: 10Gbps Ready">
                            </div>
                            <div class="form-group">
                                <label>뱃지 라벨 (선택)</label>
                                <input type="text" id="h-badge" class="form-control" placeholder="예: BEST, NEW">
                            </div>
                            <div class="form-group">
                                <label>한줄 요약 (설명)</label>
                                <input type="text" id="h-summary" class="form-control" placeholder="상품에 대한 짧은 설명">
                            </div>
                        </div>
                        <div class="form-group" style="margin-top:15px;">
                            <label>주요 특징 (엔터로 줄바꿈)</label>
                            <textarea id="h-features" class="form-control" rows="4"
                                placeholder="특징 1&#13;&#10;특징 2"></textarea>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top:15px;">
                            <div class="form-group">
                                <label>정렬 순서</label>
                                <input type="number" id="h-order" class="form-control" value="1">
                            </div>
                            <div class="form-group" style="padding-top:30px;">
                                <label><input type="checkbox" id="h-active" checked> 판매 활성화</label>
                            </div>
                        </div>
                        <div
                            style="text-align: right; margin-top:20px; display: flex; justify-content: flex-end; gap: 10px;">
                            <button type="submit" class="btn btn-primary" id="btn-save-hosting">상품 저장</button>
                        </div>
                    </form>
                </div>
            </div>

            <div id="sub-vpn" class="sub-content" style="display:none;">

                <!-- 목록 Card (상단) -->
                <div class="card" style="margin-bottom: 30px;">
                    <div class="card-header">
                        <h3 class="card-title">VPN 상품 목록</h3>
                    </div>
                    <div style="overflow-x:auto;">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th width="50">#</th>
                                    <th>상품명</th>
                                    <th>가격</th>
                                    <th>스펙 요약</th>
                                    <th>상태</th>
                                    <th>관리</th>
                                </tr>
                            </thead>
                            <tbody id="vpn-list-body"></tbody>
                        </table>
                    </div>
                </div>

                <!-- 폼 Card (하단) -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title" id="v-form-title">VPN 상품 등록/수정</h3>
                        <button type="button" class="btn btn-secondary btn-sm" onclick="resetForm('vpn')"
                            style="margin-left: auto;">
                            <i class="fas fa-undo"></i> 초기화
                        </button>
                    </div>
                    <form id="vpn-form">
                        <input type="hidden" id="v-id-hidden"> <!-- For Edit Mode -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <div class="form-group">
                                <label>상품명</label>
                                <input type="text" id="v-name" class="form-control" placeholder="예: Standard VPN"
                                    required>
                            </div>
                            <div class="form-group">
                                <label>고유 ID (영문/숫자)</label>
                                <input type="text" id="v-id" class="form-control" placeholder="예: vpn_std" required>
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top:15px;">
                            <div class="form-group">
                                <label>가격</label>
                                <input type="text" id="v-price" class="form-control" placeholder="예: 50,000">
                            </div>
                            <div class="form-group">
                                <label>기간/단위</label>
                                <select id="v-period" class="form-control">
                                    <option value="월">월 (Month)</option>
                                    <option value="년">년 (Year)</option>
                                    <option value="1회">1회 (One-time)</option>
                                </select>
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin-top:15px;">
                            <div class="form-group">
                                <label>속도</label>
                                <input type="text" id="v-speed" class="form-control" placeholder="100Mbps">
                            </div>
                            <div class="form-group">
                                <label>거점 수</label>
                                <input type="text" id="v-sites" class="form-control" placeholder="5 Site">
                            </div>
                            <div class="form-group">
                                <label>사용자 수</label>
                                <input type="text" id="v-users" class="form-control" placeholder="50 Users">
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top:15px;">
                            <div class="form-group">
                                <label>뱃지 (선택)</label>
                                <input type="text" id="v-badge" class="form-control" placeholder="예: BEST">
                            </div>
                            <div class="form-group">
                                <label>한줄 요약</label>
                                <input type="text" id="v-summary" class="form-control" placeholder="설명...">
                            </div>
                        </div>
                        <div class="form-group" style="margin-top:15px;">
                            <label>주요 특징 (엔터로 줄바꿈)</label>
                            <textarea id="v-features" class="form-control" rows="4"></textarea>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top:15px;">
                            <div class="form-group">
                                <label>정렬 순서</label>
                                <input type="number" id="v-order" class="form-control" value="1">
                            </div>
                            <div class="form-group" style="padding-top:30px;">
                                <label><input type="checkbox" id="v-active" checked> 판매 활성화</label>
                                <label style="margin-left:15px;"><input type="checkbox" id="v-popular">
                                    인기상품</label>
                            </div>
                        </div>
                        <div style="text-align: right; margin-top:20px;">
                            <button type="submit" class="btn btn-primary" id="btn-save-vpn">상품 저장</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Colocation Sub -->
            <div id="sub-colocation" class="sub-content" style="display:none;">
                <!-- List Card (Top) -->
                <div class="card" style="margin-bottom: 30px;">
                    <div class="card-header">
                        <h3 class="card-title">코로케이션 목록</h3>
                    </div>
                    <div style="overflow-x:auto;">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th width="50">#</th>
                                    <th>상품명</th>
                                    <th>가격</th>
                                    <th>사양(공간/전력)</th>
                                    <th>상태</th>
                                    <th>관리</th>
                                </tr>
                            </thead>
                            <tbody id="colocation-list-body"></tbody>
                        </table>
                    </div>
                </div>

                <!-- Form Card (Bottom) -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title" id="c-form-title">코로케이션 상품 등록/수정</h3>
                        <button type="button" class="btn btn-secondary btn-sm" onclick="resetForm('colocation')"
                            style="margin-left: auto;">
                            <i class="fas fa-undo"></i> 초기화
                        </button>
                    </div>
                    <form id="colocation-form">
                        <input type="hidden" id="c-id-hidden">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <div class="form-group">
                                <label>상품명</label>
                                <input type="text" id="c-name" class="form-control" required placeholder="예: 1U Server">
                            </div>
                            <div class="form-group">
                                <label>상품 ID (Slug)</label>
                                <input type="text" id="c-id" class="form-control" required placeholder="예: colo_1u">
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top:15px;">
                            <div class="form-group">
                                <label>가격</label>
                                <input type="text" id="c-price" class="form-control" placeholder="예: 100,000">
                            </div>
                            <div class="form-group">
                                <label>기간</label>
                                <select id="c-period" class="form-control">
                                    <option value="월">월 (Month)</option>
                                    <option value="년">년 (Year)</option>
                                    <option value="1회">1회 (One-time)</option>
                                </select>
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top:15px;">
                            <div class="form-group">
                                <label>공간 (Space)</label>
                                <input type="text" id="c-cpu" class="form-control" placeholder="예: 1U / Quarter Rack">
                                <!-- Using CPU field for Space -->
                            </div>
                            <div class="form-group">
                                <label>전력 (Power)</label>
                                <input type="text" id="c-ram" class="form-control" placeholder="예: 1A / 2.2kW">
                                <!-- Using RAM field for Power -->
                            </div>
                        </div>
                        <div class="form-group" style="margin-top:15px;">
                            <label>요약설명</label>
                            <input type="text" id="c-summary" class="form-control" placeholder="상품에 대한 간단한 설명">
                        </div>
                        <div class="form-group" style="margin-top:15px;">
                            <label>주요 특징 (엔터로 줄바꿈)</label>
                            <textarea id="c-features" class="form-control" rows="4"></textarea>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top:15px;">
                            <div class="form-group">
                                <label>정렬 순서</label>
                                <input type="number" id="c-order" class="form-control" value="1">
                            </div>
                            <div class="form-group" style="padding-top:30px;">
                                <label><input type="checkbox" id="c-active" checked> 판매 활성화</label>
                                <label style="margin-left:15px;"><input type="checkbox" id="c-popular"> 인기상품</label>
                            </div>
                        </div>
                        <div style="text-align: right; margin-top:20px;">
                            <button type="submit" class="btn btn-primary" id="btn-save-colocation">상품 저장</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- 4. 보안 서비스 관리 섹션 (New) -->
            <div id="sub-security" class="sub-content" style="display:none;">
                <div class="card" style="margin-bottom: 20px; border-left: 5px solid #ef4444;">
                    <div style="display: flex; align-items: center; justify-content: space-between;">
                        <div>
                            <h3 style="margin: 0; font-size: 1.1rem;">🛡️ 보안 서비스 카테고리</h3>
                            <p style="margin: 5px 0 0; color: #666; font-size: 0.9rem;">WAF, SSL, 안티바이러스 등 보안 상품 관리
                            </p>
                        </div>
                        <select id="security-type-select" class="form-input" style="width: 250px; font-weight: bold;"
                            onchange="renderProducts()">
                            <option value="security-waf">🔥 웹방화벽 (WAF)</option>
                            <option value="security-waf-pro">🛡️ WAF Pro (Managed)</option>
                            <option value="security-cleanzone">🧹 클린존 (Anti-DDoS)</option>
                            <option value="security-private-ca">🔑 Private CA</option>
                            <option value="security-ssl">🔒 SSL 인증서</option>
                            <option value="security-v3">🦠 V3 Net Server</option>
                            <option value="security-dbsafer">🗄️ DBSAFER</option>
                        </select>
                    </div>
                </div>

                <!-- 보안 서비스 리스트 (Swapped to Top) -->
                <div class="card" style="margin-bottom: 30px;">
                    <div class="card-header">
                        <h3 id="sec-list-subtitle" class="card-title">등록된 보안 상품 목록</h3>
                        <span class="badge badge-blue">DB 연동</span>
                    </div>
                    <div style="overflow-x:auto;">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th width="50">순서</th>
                                    <th>상품명/ID</th>
                                    <th>가격/단위</th>
                                    <th>주요 스펙</th>
                                    <th>상태</th>
                                    <th width="80">관리</th>
                                </tr>
                            </thead>
                            <tbody id="security-list-body">
                                <!-- JS Rendered -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- 보안 서비스 등록 수정 폼 (Swapped to Bottom) -->
                <div class="card mt-4">
                    <div class="card-header">
                        <h3 class="card-title">상품 등록 / 수정</h3>
                        <button type="button" class="btn btn-secondary btn-sm" onclick="resetForm('security')"
                            style="margin-left: auto;">
                            <i class="fas fa-undo"></i> 초기화
                        </button>
                    </div>
                    <form id="security-form">
                        <input type="hidden" id="sec-id-hidden">
                        <div class="grid-2">
                            <div class="form-group">
                                <label>상품명</label>
                                <input type="text" id="sec-name" class="form-control" placeholder="예: Standard"
                                    required>
                            </div>
                            <div class="form-group">
                                <label>상품 ID (유니크)</label>
                                <input type="text" id="sec-id" class="form-control" placeholder="예: waf-std" required>
                            </div>
                        </div>
                        <div class="grid-2" style="margin-top:15px;">
                            <div class="form-group">
                                <label>가격 (숫자, 콤마)</label>
                                <input type="text" id="sec-price" class="form-control" placeholder="예: 300,000"
                                    required>
                            </div>
                            <div class="form-group">
                                <label>단위 (기간/건)</label>
                                <input type="text" id="sec-period" class="form-control" placeholder="예: 월, 년, 건"
                                    required>
                            </div>
                        </div>
                        <div style="margin-top:15px;">
                            <div class="form-group">
                                <label>요약 설명 (부제목)</label>
                                <input type="text" id="sec-summary" class="form-control" placeholder="리스트에 표시될 짧은 설명">
                            </div>
                        </div>
                        <div class="grid-2" style="margin-top:15px;">
                            <div class="form-group">
                                <label>뱃지 (인기/추천)</label>
                                <input type="text" id="sec-badge" class="form-control" placeholder="예: 인기, 추천">
                            </div>
                            <div class="form-group">
                                <label>정렬 순서</label>
                                <input type="number" id="sec-order" class="form-control" value="1">
                            </div>
                        </div>
                        <div class="form-group" style="margin-top:15px;">
                            <label>상세 기능 (한 줄에 하나씩)</label>
                            <textarea id="sec-features" class="form-control" rows="4"
                                placeholder="기능 1&#10;기능 2&#10;기능 3"></textarea>
                        </div>
                        <div class="form-group" style="margin-top:20px;">
                            <label><input type="checkbox" id="sec-active" checked> 판매 중 (활성화)</label>
                        </div>
                        <div
                            style="margin-top: 20px; text-align: right; display: flex; justify-content: flex-end; gap: 10px;">
                            <button type="submit" class="btn btn-primary" id="btn-save-security">저장하기</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- 5. 부가서비스 관리 섹션 -->
            <div id="sub-service" class="sub-content" style="display:none;">

                <!-- 카테고리 선택 (부가서비스 내 세분화) -->
                <div class="card" style="margin-bottom: 20px; border-left: 5px solid #8b5cf6;">
                    <div style="display: flex; align-items: center; justify-content: space-between;">
                        <div>
                            <h3 style="margin: 0; font-size: 1.1rem;">📂 부가서비스 카테고리 선택</h3>
                            <p style="margin: 5px 0 0; color: #666; font-size: 0.9rem;">관리할 부가서비스의 종류를 선택하세요.</p>
                        </div>
                        <select id="service-type-select" class="form-input" style="width: 250px; font-weight: bold;"
                            onchange="renderProducts()">
                            <option value="addon-license">💾 소프트웨어 라이선스</option>
                            <option value="addon-backup">🧱 백업 서비스</option>
                            <option value="addon-ha">⚡ HA (고가용성)</option>
                            <option value="addon-lb">⚖️ 로드밸런싱</option>
                            <option value="addon-cdn">🌍 CDN</option>
                            <option value="addon-recovery">🚑 데이터 복구</option>
                            <option value="addon-monitoring">🖥️ 모니터링</option>
                            <option value="addon-management">🔧 운영 관리 / 기술지원</option>
                            <option value="addon-etc">📦 기타 부가서비스</option>
                        </select>
                    </div>
                </div>

                <!-- 목록 Card (Swapped to Top) -->
                <div class="card" style="margin-top:20px; margin-bottom: 30px;">
                    <div class="card-header">
                        <h3 class="card-title">목록</h3>
                        <p style="margin:0; font-size:0.9rem; color:#666;" id="s-list-subtitle">선택된 카테고리의 상품이 표시됩니다.
                        </p>
                    </div>
                    <div style="overflow-x:auto;">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th width="50">#</th>
                                    <th>서비스명</th>
                                    <th>가격</th>
                                    <th>설명</th>
                                    <th>상태</th>
                                    <th>관리</th>
                                </tr>
                            </thead>
                            <tbody id="service-list-body"></tbody>
                        </table>
                    </div>
                </div>

                <!-- 등록/수정 폼 (Swapped to Bottom) -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title" id="s-form-title">부가서비스 상품 등록/수정</h3>
                        <button type="button" class="btn btn-secondary btn-sm" onclick="resetForm('service')"
                            style="margin-left: auto;">
                            <i class="fas fa-undo"></i> 초기화
                        </button>
                    </div>
                    <form id="service-form">
                        <input type="hidden" id="s-edit-index" value="">
                        <input type="hidden" id="s-id-hidden"> <!-- New ID hidden for generic -->

                        <div class="grid-2">
                            <div class="form-group">
                                <label class="form-label">서비스명</label>
                                <input type="text" id="s-name" class="form-control" placeholder="예: Windows Server 2019"
                                    required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">서비스 ID (유니크)</label>
                                <input type="text" id="s-id" class="form-control" placeholder="예: win_2019_std"
                                    required>
                            </div>
                        </div>

                        <div class="grid-2" style="margin-top:15px;">
                            <div class="form-group">
                                <label class="form-label">가격</label>
                                <input type="text" id="s-price" class="form-control" placeholder="예: 41,000" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">기간/단위</label>
                                <select id="s-period" class="form-control">
                                    <option value="월">월 (Month)</option>
                                    <option value="년">년 (Year)</option>
                                    <option value="Core">Core</option>
                                    <option value="건">건 (One-time)</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group" style="margin-top:15px;">
                            <label class="form-label">상세 설명 (또는 스펙)</label>
                            <input type="text" id="s-summary" class="form-control"
                                placeholder="예: 기본 8Core 제공, 정품 라이선스">
                        </div>

                        <div class="form-group" style="margin-top:15px;">
                            <label class="form-label">주요 특징 (엔터로 줄바꿈)</label>
                            <textarea id="s-features" class="form-control" rows="4"
                                placeholder="특징 1&#13;&#10;특징 2"></textarea>
                        </div>

                        <div class="grid-2" style="margin-top:15px;">
                            <div class="form-group">
                                <label class="form-label">정렬 순서</label>
                                <input type="number" id="s-order" class="form-control" value="1">
                            </div>
                            <div class="form-group" style="padding-top:30px;">
                                <label style="display:flex; align-items:center; gap:8px;">
                                    <input type="checkbox" id="s-active" checked> 판매중
                                </label>
                                <label style="display:flex; align-items:center; gap:8px; margin-left:15px;">
                                    <input type="checkbox" id="s-popular"> 추천 상품
                                </label>
                            </div>
                        </div>

                        <div style="text-align: right; margin-top:20px;">
                            <button type="submit" class="btn btn-primary" id="s-btn-submit">서비스 저장</button>
                        </div>
                    </form>
                </div>
            </div>

        </div>

        <!-- ======================= 다른 탭들 (기존 유지) ======================= -->
        <!-- 고객사 로고 탭 -->
        <div id="tab-customer" class="tab-content">
            <h2 class="page-title">고객사 로고</h2>
            <p class="page-subtitle">메인 페이지에 노출될 고객사 로고를 관리합니다.</p>
            <div id="alert-container"></div>
            <!-- 고객사 추가 폼 -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title" id="form-title">고객사 추가</h3>
                </div>
                <form id="customer-form">
                    <input type="hidden" id="edit-index" value="">
                    <div style="display: grid; grid-template-columns: 1fr 2fr auto auto; gap: 16px; align-items: end;">
                        <div class="form-group" style="margin-bottom: 0;">
                            <label class="form-label">고객사명 *</label>
                            <input type="text" id="customer-name" class="form-input" placeholder="예: 삼성전자" required>
                        </div>
                        <div class="form-group" style="margin-bottom: 0;">
                            <label class="form-label">로고 URL (선택)</label>
                            <input type="url" id="customer-logo" class="form-input"
                                placeholder="https://example.com/logo.png">
                        </div>
                        <button type="submit" class="btn btn-primary" id="submit-btn">
                            <i class="fas fa-plus"></i> 추가
                        </button>
                        <button type="button" class="btn btn-secondary" id="cancel-btn" style="display: none;"
                            onclick="cancelEdit()">
                            <i class="fas fa-times"></i> 취소
                        </button>
                    </div>
                </form>
            </div>
            <!-- 고객사 목록 -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">등록된 고객사 (<span id="customer-count">0</span>개)</h3>
                </div>
                <div id="customer-list" class="customer-grid"></div>
            </div>
        </div>

        <!-- Other Tabs (Cleaned up) -->
        <!-- 약관 관리 -->
        <div id="tab-terms" class="tab-content">
            <h2 class="page-title">약관 관리</h2>
            <p class="page-subtitle">홈페이지 하단에 노출되는 약관 내용을 관리합니다.</p>
            <div id="term-alert-container"></div>
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">이용약관 및 정책 수정</h3>
                </div>
                <div class="form-group">
                    <label class="form-label">약관 선택</label>
                    <div class="admin-tabs" style="margin-top: 0; margin-bottom: 20px; border-bottom: none; gap: 10px;">
                        <button type="button" class="btn btn-secondary" onclick="loadTermEditor('privacy')"
                            id="btn-privacy">개인정보처리방침</button>
                        <button type="button" class="btn btn-secondary" onclick="loadTermEditor('terms')"
                            id="btn-terms">이용약관</button>
                        <button type="button" class="btn btn-secondary" onclick="loadTermEditor('member')"
                            id="btn-member">회원약관</button>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label" id="editor-label">내용 편집 (텍스트 입력)</label>
                    <textarea id="term-content" class="form-input"
                        style="min-height: 400px; font-family: monospace; line-height: 1.5;"
                        placeholder="약관 내용을 입력하세요..."></textarea>
                </div>
                <div style="text-align: right; display: flex; justify-content: flex-end; gap: 10px;">
                    <button type="button" class="btn btn-secondary" onclick="resetTermToDefault()"
                        style="background: #efefef; color: #333;">
                        <i class="fas fa-undo"></i> 기본값 불러오기
                    </button>
                    <button type="button" class="btn btn-primary" onclick="saveCurrentTerm()">
                        <i class="fas fa-save"></i> 저장하기
                    </button>
                </div>
            </div>
            <div style="background: #f0f9ff; padding: 20px; border-radius: 8px; margin-top: 20px;">
                <h4><i class="fas fa-info-circle"></i> 안내</h4>
                <p style="margin-top: 10px; font-size: 14px; color: #64748b;">
                    여기서 저장한 내용은 LocalStorage에 저장됩니다. (실제 배포 시 백엔드 연동 필요)
                </p>
            </div>
        </div>

        <!-- ======================= 웹로그 분석 탭 ======================= -->
        <div id="tab-analytics" class="tab-content">
            <h2 class="page-title">웹로그 분석</h2>
            <p class="page-subtitle">방문자 현황 및 트래픽을 분석합니다.</p>

            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">주간 방문자 추이</h3>
                    <button class="btn btn-secondary" onclick="refreshAnalytics()">
                        <i class="fas fa-sync-alt"></i> 새로고침
                    </button>
                </div>
                <div style="height: 300px;">
                    <canvas id="analyticsChart"></canvas>
                </div>
            </div>

            <div class="grid-2">
                <div class="card">
                    <h3 class="card-title">인기 페이지 TOP 5</h3>
                    <table class="admin-table" style="margin-top:20px;">
                        <thead>
                            <tr>
                                <th>페이지</th>
                                <th width="100">방문수</th>
                            </tr>
                        </thead>
                        <tbody id="top-pages-table">
                            <!-- JS load -->
                        </tbody>
                    </table>
                </div>
                <div class="card">
                    <h3 class="card-title">최근 접속 로그</h3>
                    <table class="admin-table" style="margin-top:20px;">
                        <thead>
                            <tr>
                                <th>시간</th>
                                <th>페이지</th>
                                <th>IP</th>
                            </tr>
                        </thead>
                        <tbody id="recent-logs-table">
                            <!-- JS load -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- ======================= 회사 연혁 관리 탭 ======================= -->
        <div id="tab-history" class="tab-content">
            <h2 class="page-title">회사 연혁 관리</h2>
            <p class="page-subtitle">회사 역사 및 주요 이벤트를 연도별로 관리합니다.</p>

            <div id="history-alert-container"></div>

            <!-- 연혁 등록 폼 -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title" id="history-form-title">연혁 추가</h3>
                </div>
                <form id="history-form">
                    <input type="hidden" id="history-edit-id" value="">

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                        <div class="form-group">
                            <label>연도 *</label>
                            <input type="number" id="history-year" class="form-control" placeholder="예: 2025" min="1900"
                                max="2100" required>
                        </div>
                        <div class="form-group">
                            <label>월 (선택)</label>
                            <select id="history-month" class="form-control">
                                <option value="">연도만</option>
                                <option value="1">1월</option>
                                <option value="2">2월</option>
                                <option value="3">3월</option>
                                <option value="4">4월</option>
                                <option value="5">5월</option>
                                <option value="6">6월</option>
                                <option value="7">7월</option>
                                <option value="8">8월</option>
                                <option value="9">9월</option>
                                <option value="10">10월</option>
                                <option value="11">11월</option>
                                <option value="12">12월</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>제목 *</label>
                        <input type="text" id="history-title" class="form-control" placeholder="예: 다날클라우드 서비스 제공"
                            required>
                    </div>

                    <div class="form-group">
                        <label>설명</label>
                        <textarea id="history-description" class="form-control" rows="3"
                            placeholder="상세 설명을 입력하세요 (선택사항)"></textarea>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div class="form-group">
                            <label>정렬 순서</label>
                            <input type="number" id="history-sort" class="form-control" value="1" min="1">
                            <small style="color: #999;">같은 연도/월 내에서의 순서</small>
                        </div>
                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" id="history-active" checked>
                                활성화
                            </label>
                        </div>
                    </div>

                    <div style="display: flex; gap: 10px; margin-top: 20px;">
                        <button type="submit" class="btn btn-primary" id="history-submit-btn">
                            <i class="fas fa-plus"></i> 추가
                        </button>
                        <button type="button" class="btn btn-secondary" id="history-cancel-btn"
                            onclick="resetHistoryForm()" style="display: none;">
                            <i class="fas fa-times"></i> 취소
                        </button>
                    </div>
                </form>
            </div>

            <!-- 연혁 목록 -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">등록된 연혁 (<span id="history-count">0</span>)</h3>
                    <button class="btn btn-secondary" onclick="refreshHistoryList()">
                        <i class="fas fa-sync"></i> 새로고침
                    </button>
                </div>
                <div id="history-list" style="min-height: 200px;"></div>
            </div>
        </div>

        <div id="tab-contact" class="tab-content">
            <h2 class="page-title">연락 관리</h2>
        </div>

        <!-- ======================= FAQ 관리 탭 ======================= -->
        <div id="tab-faq" class="tab-content">
            <h2 class="page-title">FAQ 관리</h2>
            <p class="page-subtitle">자주 묻는 질문을 카테고리별로 관리합니다.</p>

            <div id="faq-alert-container"></div>

            <!-- FAQ 등록 폼 -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title" id="faq-form-title">FAQ 추가</h3>
                </div>
                <form id="faq-form">
                    <input type="hidden" id="faq-edit-id" value="">

                    <div class="form-group">
                        <label>카테고리</label>
                        <select id="faq-category" class="form-control">
                            <option value="general">일반</option>
                            <option value="technical">기술</option>
                            <option value="billing">요금</option>
                            <option value="service">서비스</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>질문 *</label>
                        <input type="text" id="faq-question" class="form-control" placeholder="자주 묻는 질문을 입력하세요"
                            required>
                    </div>

                    <div class="form-group">
                        <label>답변 *</label>
                        <textarea id="faq-answer" class="form-control" rows="5" placeholder="답변 내용을 입력하세요"
                            required></textarea>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div class="form-group">
                            <label>정렬 순서</label>
                            <input type="number" id="faq-sort" class="form-control" value="1" min="1">
                        </div>
                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" id="faq-active" checked>
                                활성화
                            </label>
                        </div>
                    </div>

                    <div style="display: flex; gap: 10px; margin-top: 20px;">
                        <button type="submit" class="btn btn-primary" id="faq-submit-btn">
                            <i class="fas fa-plus"></i> 추가
                        </button>
                        <button type="button" class="btn btn-secondary" id="faq-cancel-btn" onclick="resetFaqForm()"
                            style="display: none;">
                            <i class="fas fa-times"></i> 취소
                        </button>
                    </div>
                </form>
            </div>

            <!-- FAQ 목록 -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">등록된 FAQ (<span id="faq-count">0</span>)</h3>
                    <button class="btn btn-secondary" onclick="refreshFaqList()">
                        <i class="fas fa-sync"></i> 새로고침
                    </button>
                </div>
                <div id="faq-list" style="min-height: 200px;"></div>
            </div>
        </div>

        <!-- ======================= 공지사항 관리 탭 ======================= -->
        <div id="tab-notice" class="tab-content">
            <h2 class="page-title">공지사항 관리</h2>
            <p class="page-subtitle">사이트의 공지사항을 관리합니다.</p>

            <div id="notice-alert-container"></div>

            <!-- 공지사항 등록 폼 -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title" id="notice-form-title">공지사항 작성</h3>
                </div>
                <form id="notice-form">
                    <input type="hidden" id="notice-edit-id" value="">

                    <div class="form-group">
                        <label>제목 *</label>
                        <input type="text" id="notice-title" class="form-control" placeholder="공지사항 제목을 입력하세요" required>
                    </div>

                    <div class="form-group">
                        <label>내용 *</label>
                        <textarea id="notice-content" class="form-control" rows="10"
                            placeholder="공지사항 내용을 입력하세요 (HTML 사용 가능)" required></textarea>
                        <small style="color: #999;">HTML 태그를 사용할 수 있습니다.</small>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px;">
                        <div class="form-group">
                            <label>작성자</label>
                            <input type="text" id="notice-author" class="form-control" value="HUMECCA"
                                placeholder="관리자">
                        </div>
                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" id="notice-pinned">
                                상단 고정
                            </label>
                        </div>
                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" id="notice-active" checked>
                                활성화
                            </label>
                        </div>
                    </div>

                    <div style="display: flex; gap: 10px; margin-top: 20px;">
                        <button type="submit" class="btn btn-primary" id="notice-submit-btn">
                            <i class="fas fa-plus"></i> 작성
                        </button>
                        <button type="button" class="btn btn-secondary" id="notice-cancel-btn"
                            onclick="resetNoticeForm()" style="display: none;">
                            <i class="fas fa-times"></i> 취소
                        </button>
                    </div>
                </form>
            </div>

            <!-- 공지사항 목록 -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">공지사항 목록 (<span id="notice-count">0</span>)</h3>
                    <button class="btn btn-secondary" onclick="refreshNoticeList()">
                        <i class="fas fa-sync"></i> 새로고침
                    </button>
                </div>
                <div id="notice-list" style="min-height: 200px;"></div>
            </div>
        </div>

        <!-- ======================= 문의 관리 탭 ======================= -->
        <div id="tab-inquiry" class="tab-content">
            <h2 class="page-title">문의 관리</h2>
            <p class="page-subtitle">고객 문의를 확인하고 답변합니다.</p>

            <div id="inquiry-alert-container"></div>

            <!-- 필터 -->
            <div class="card">
                <div style="display: flex; gap: 15px; align-items: center;">
                    <label style="font-weight: 600;">상태 필터:</label>
                    <select id="inquiry-filter" class="form-control" style="width: 200px;"
                        onchange="refreshInquiryList()">
                        <option value="all">전체</option>
                        <option value="pending">답변 대기</option>
                        <option value="replied">답변 완료</option>
                        <option value="closed">종료</option>
                    </select>
                    <button class="btn btn-secondary" onclick="refreshInquiryList()">
                        <i class="fas fa-sync"></i> 새로고침
                    </button>
                </div>
            </div>

            <!-- 문의 목록 -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">문의 목록 (<span id="inquiry-count">0</span>)</h3>
                </div>
                <div id="inquiry-list" style="min-height: 200px;"></div>
            </div>
        </div>

        <div id="tab-contact" class="tab-content">
            <div id="export-overlay">
                <div class="modal-box">
                    <div class="card-header"
                        style="border-bottom: 1px solid #eee; padding-bottom: 15px; margin-bottom: 15px;">
                        <h3 class="card-title" id="export-title">데이터 파일 다운로드</h3>
                        <button onclick="document.getElementById('export-overlay').style.display='none'"
                            style="border:none; background:none; cursor:pointer;"><i class="fas fa-times"
                                style="font-size: 20px; color: #999;"></i></button>
                    </div>
                    <p style="color: #666; font-size: 14px; margin-bottom: 15px;">
                        아래 버튼을 눌러 <strong id="export-filename">data.js</strong> 파일을 다운로드하세요.<br>
                        다운로드한 파일을 프로젝트의 <code>js/</code> 폴더에 덮어쓰기 하시면 적용됩니다.
                    </p>
                    <textarea id="export-code"
                        style="width: 100%; height: 100px; background: #f8f9fa; border: 1px solid #ddd; padding: 10px; font-size: 12px; margin-bottom: 15px; display:none;"></textarea>

                    <button onclick="downloadJS()" class="btn btn-primary"
                        style="width: 100%; justify-content: center; padding: 15px;">
                        <i class="fas fa-download"></i> <span id="export-btn-text">Download</span>
                    </button>
                </div>
            </div>


        </div> <!-- End Tab Contact -->

    </div> <!-- End Main Container -->

    <script src="admin_script.js"></script>
</body>

</html>